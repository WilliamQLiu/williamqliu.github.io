---
layout: post
title: Godot
---


# {{ page.title }}

Look up "Godot Tutorials" on YouTube for the basic tutorial series.

## Game Loop (Over simplified)

Keep in mind your game will run at say 60 Frames Per Second so
don't run big for loops, complex calculations in your script lifecycles.

While(userNotQuitOrCrash):
    updatePhysics()
    Scene.updateScenePicture()  # Update images you're shown
    passToNodeScripts(userInput)
    performanceUpdate()  # Most game engines will handle this for you
    userNotQuitOrCrash = updateAppState()

Look at the `MainLoop.cpp` and `Main.cpp` file for details on this game loop.

## Nodes and Resources

Top main classes are 'Nodes' and 'Resources'

### Nodes

Node classes are functionality and behavior.

* Nodes represent behavior
* Nodes give you functionality (draw a sprite, simulate physics, manager player speed)
* Nodes have Class Inheritance

Example Nodes

* Spatial (a 3D game object)
* CanvasItem -> Node2D (a 2D game object)

### Resources

In the FileSystem (bottom left default), you can create a new 'Resource' class.
A resource is saved to the disk (file system).

* Resources are Data Containers
* All they do is hold data. Nodes rely on the data contained in resources

Example Resources

* Scenes
* GDScripts

## Script Lifecycle

Our game objects go through a life cycle of:

* Create/Start
* Exist
* Destroy/End

Lifecycle details:

1. "Enter Tree" - A scence is loaded from disk or created by a script
2. "Ready" - The root node of the newly instantiated scene is added as a child of the root viewport
  or to any child of it
3. "Player Input" - Every node of the newly added scene will receive the `enter_tree()` notification in top
  to bottom order
4. "Physics Processing" - The `ready()` notification is called when a node and all its children are inside the active scence
5. "Process" - While the object is active in the scence, callbacks such as the
   `_input()`, `_process()`, `_physics_process()` are called if used
6. "Exit Tree" - When a scene is removed, they receive the `exit scene` notification in bottom to top order
   So all the children will exist scene before the root node can exit

## Virtual Methods

__Virtual Methods__ allow subclasses of the base class type that has the virtual method to
override the method. If there is `virtual`, Godot will handle virtual method calls if they are
overridden. For example, a Node class has the following methods:

Node Methods

* void `_enter_tree()` virtual
* void `_exit_tree()` virtual
* String `_get_configuration_warning()` virtual
* void `_input(InputEvent event)` virtual
* void `_physics_process(float delta)` virtual
* void `_process(float delta)` virtual
* void `_ready()` virtual
* void `_unhandled_input(InputEvent event)` virtual

We can override these following virtual methods

### `_enter_tree()`

The `_enter_tree()` method is __always called__ when a scene (gameobject) enters the SceneTree.
The notification is Top-to-Bottom order.

How `_enter_tree()` plays:

```
root
  Parent
    Child1
      GrandChild1
    Child2
```
the order will be:

* Parent has entered the SceneTree
* Child1 has entered the SceneTree
* GrandChild1 has entered the SceneTree
* Child2 has entered the SceneTree

Before our scene is loaded, it'll be an inactive Node to an active Node.

E.g.
```
      SceneTree
          |
      Root Viewport
          |
Inactive: Node -> Active: Node (`_enter_tree()` is when a Node becomes Active)
```

When do you need to use `_enter_tree()`?

* If you don't know if you should be using it, then you most likely don't need it
* If you need property values reset and/or some type of action to happen immediately
  (every time the Node is active on the SceneTree)
* Good for Scenes (Gameobjects) that will be active and inactive, and never released from memory
* `_enter_tree()` is very specialized; prioritize `_ready()` over `_enter_tree()` when setting initial property values

### `_ready()` method

* The `_ready()` function can be used by any class that inherits from the Node class
* The Root Nodes's `_ready()` function is called last (i.e. __calls lowest children first__)
* The `_ready()` method is __called only once__
* If you remove a node and add it back to the scene, it will NOT call the `_ready()` method again

Example

```
Root
  Child1
    GrandChild1
      GreatGrandChild1
    AnotherGrandChild1
  Child2
    GrandChild2

will call:

GreatGrandChild1 _ready() method is called
GrandChild1 _ready() method is called
AnotherGrandChild1 _ready() method is called
Child1 _ready() method is called
GrandChild2 _ready() method is called
Child2 _ready() method is called
Root _ready() method is called
```

Does the Root have children? If so, go to Child. If not, did the `_ready()` method get called?

Note: Just because a node has been deleted/set to inactive (no longer there in the SceneTree),
it doesn't mean it's been removed from memory.

When to use?

* Use the ready function when you only want to initialize default property values once when
  an object is created/added to the scene
* Default Player health, points, items, etc.


