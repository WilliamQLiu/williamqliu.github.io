<!DOCTYPE html>
<html>
<head>
   <title>Report Generation with R, Markdown, LaTeX</title>
   <meta name="William Liu" content="William Liu" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- LaTeX support -->
   <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js">
     MathJax.Hub.Config({
     extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
     jax: ["input/TeX", "output/HTML-CSS"],
     tex2jax: {
         inlineMath: [ ['$','$'], ["\\(","\\)"] ],
         displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
     },
     "HTML-CSS": { availableFonts: ["TeX"] }
    });
   </script>

</head>

<body>
  <div class="site">
    <div class="title">
      <a href="/">William Liu</a>
    </div>

    <div id="post">
<h2 id="report-generation-with-r-markdown-latex">Report Generation with R, Markdown, LaTeX</h2>

<hr />

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#setup">Setup</a></li>
  <li><a href="#rsweave">R Sweave</a>
    <ul>
      <li><a href="#sweavelatexcode">LaTeX showing code using Sweave</a></li>
      <li><a href="#sweavelatexplot">LaTeX showing plots using Sweave</a></li>
      <li><a href="#sweavemdcode">Markdown showing code using Sweave</a></li>
      <li><a href="#sweavemdplot">Markdown showing plots using Sweave</a></li>
    </ul>
  </li>
  <li><a href="#rknitr">R knitr</a>
    <ul>
      <li><a href="#rknitrsetup">knitr Setup</a></li>
      <li><a href="#rknitrcode">LaTeX and Markdown showing code using knitr</a></li>
    </ul>
  </li>
</ul>

<h2 id="a-idsummarysummarya"><a id="summary">Summary</a></h2>

<p><strong>R</strong> normally executes code in a regular R script.  However, sometimes we don’t want just the code and instead want to create a report that has some text documentation along with the R code.  By default, we can use the <code>Sweave</code> package (included with every R install) and we can add additional dynamic report generation using the <code>knitr</code> package.  The idea is to combine program source code (<strong>code chunks</strong>) and the corresponding documentation (<strong>documentation chunks</strong>) into a single file.</p>

<p>Code is normally stored as a <strong>R Script</strong> (e.g. <strong>.R</strong> file).  For the documentation portion, we use mainly <strong>Markdown</strong> (e.g. <strong>.md</strong>, <strong>.rmd</strong>, i.e. anything with <strong>md</strong>) or <strong>LaTeX</strong> (<strong>.tex</strong>).  We use a library like <strong>Sweave</strong> or <strong>knitr</strong> to put together the code chunks in R’s noweb format (<strong>.rnw</strong>) along with the documentation (in Markdown and LaTeX) to create an output (e.g. HTML, PDF).</p>

<h2 id="a-idsetupsetupa"><a id="setup">Setup</a></h2>

<p>I downloaded R, and RStudio, Sublime Text 3 with the LaTeXTools Package (so I can edit with my text editor of choice).  On a Mac, I downloaded MacTex and on a PC I downloaded MiKTeX.  The MacTex and MiKTeX are package managers for the LaTeX typesetting (i.e. so you can use the <code>\usepackage{stuff}</code> command, which imports helpful packages for things like importing images, if-then statements)</p>

<h2 id="a-idrsweaver-sweavea"><a id="rsweave">R Sweave</a></h2>

<p><strong>Sweave</strong> creates dynamic reports using <strong>Markdown</strong> or <strong>LaTeX</strong>, a high-quiality typesetting system mainly used in scientific documentation.
*  Sweave file extensions include taking a code chunk (e.g. <strong>.rnw</strong>, <strong>.snw</strong>), combining this with the documentation file (<strong>.tex</strong>) and creating an output of a <strong>pdf</strong> by clicking the ‘Compile PDF’ button in RStudio.
*  The function <code>Sweave()</code> is used to replace code with its output (e.g. a graph)
*  The function <code>Stangle()</code> discards the documentation and keeps only the code chunks</p>

<h4 id="a-idsweavelatexcodelatex-showing-code-using-sweavea"><a id="sweavelatexcode">LaTeX showing code using Sweave</a></h4>

<p>If you were writing your documentation in LaTeX, Sweave creates code blocks using <code>&lt;&lt; myoptions &gt;&gt;=</code> to begin a code block and <code>@</code> to end a code block.  The output can be the code itself or the results of the code (e.g. a graph of the output).  The main options are <code>fig</code> (which tells us if we should show the plot) and <code>echo</code> (which tells us if we should show the R code).  We then click the ‘Compile PDF’ button.  If you want to run any R code inside, just highlight the code chunks and click ‘Run’.</p>

<pre><code>\documentclass{article}

\begin{document}
\SweaveOpts{concordance=TRUE}

&lt;&lt;name="Stuff", fig=TRUE, echo=FALSE&gt;&gt;=

cat("This is my R code.\n")
set.seed(123)
x &lt;- 1:10
y &lt;- rnorm(10)
plot(x, y)

cat("This is some more R code.\n")

@

\end{document}
</code></pre>

<h4 id="a-idsweavelatexplotlatex-showing-plots-using-sweavea"><a id="sweavelatexplot">LaTeX showing plots using Sweave</a></h4>

<ul>
  <li>One code block can only create one plot.</li>
  <li>If you want to place the figure yourself, add in <code>include=FALSE</code></li>
  <li>You can add size options (in inches) with <code>height=4, width=5</code></li>
  <li>To print with ggplot graphics, put a <code>print()</code> around the plotting function</li>
  <li>If you want to keep your source code format, use <code>keep.source=TRUE</code></li>
  <li>To change the size of the output graphic (default is 85% of line width), add this to the LaTeX section: 
    <ul>
      <li>Set to entire width: <code>\setkeys{Gin}{width=\textwidth}</code></li>
      <li>Set to half width: <code>\setkeys{Gin}{width=.5\linewidth}</code></li>
    </ul>
  </li>
</ul>

<h4 id="a-idsweavemdcodemarkdown-showing-code-using-sweavea"><a id="sweavemdcode">Markdown showing code using Sweave</a></h4>

<p>If you were writing your documentation in Markdown, you start a code chunk with the below marks.  If you do not want to specify the underlying R code, use <code>echo=FALSE</code>.  If you do not want to display the graph, use <code>eval=FALSE</code>.</p>

<pre><code>```{r, echo=FALSE}
1+1
.4-.7+.3  # What?  Why is this not zero?!
```

# R code expressions
Yes I know the value of pi is `r pi` and 2 times pi is `r pi*2`
</code></pre>

<h4 id="a-idsweavemdplotmarkdown-showing-plots-using-sweavea"><a id="sweavemdplot">Markdown showing plots using Sweave</a></h4>

<p>Again, you can also show plots in Markdown.</p>

<pre><code> ```{r, echo=FALSE}
plot(1:10, 1:10)
 ```
</code></pre>

<h2 id="a-idrknitrr-knitra"><a id="rknitr">R knitr</a></h2>

<h4 id="a-idrknitrsetupknitr-setupa"><a id="rknitrsetup">knitr Setup</a></h4>

<p><strong>knitr</strong> is a package (like Sweave) that is another way of ‘weaving’ (i.e. replace code snippets with the generated code output).  It has a few more advanced features like being able to generate the printed R terminal (showing warnings and errors), more flexibility on graphics, etc.
*  knitr takes in the following input documentation text using <strong>LaTeX</strong> (<strong>tex</strong>) or <strong>Markdown</strong> (<strong>rmd</strong>) and code chunks using <strong>R noweb</strong> (<strong>rnw</strong>). 
*  This produces an output of a <strong>pdf</strong>.  To display code chunks, sweave and knitr have the same format.</p>

<p>Using RStudio, install the package ‘knitr’ on CRAN.  Then change RStudio’s settings under ‘Tools’ &gt; ‘Global Options’ &gt; ‘Sweave’ &gt; ‘Weave Rnw files using’ &gt; switch from ‘Sweave’ to ‘knitr’.</p>

<h4 id="a-idrknitrcodelatex-and-markdown-showing-code-using-knitra"><a id="rknitrcode">LaTeX and Markdown showing code using knitr</a></h4>

<p>knitr is included as code chunks just like Sweave.  The only thing is to include <code>library(knitr)</code> right at the front of the code chunk.</p>

<p><strong>LaTeX</strong></p>

<pre><code>\documentclass{article}

\begin{document}
\SweaveOpts{concordance=TRUE}
&lt;&lt;name="Stuff", fig=TRUE, echo=FALSE&gt;&gt;=
    library(knitr)
    cat("This is some more R code.\n")
@
\end{document}
</code></pre>

<p><strong>Markdown</strong></p>

<pre><code>```{r, echo=FALSE}
library(knitr)
1+1
.4-.7+.3  # What?  Why is this not zero?!
```
</code></pre>

</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>17 Oct 2015</span> <a href="/2015/10/17/django.html">Django Web Framework</a></li>
    
      <li><span>04 Oct 2015</span> <a href="/2015/10/04/testing.html">Testing</a></li>
    
      <li><span>03 Oct 2015</span> <a href="/2015/10/03/django-rest-framework.html">Django REST Framework (DRF)</a></li>
    
  </ul>
</div>

    <div class="footer">
      <div class="contact">
        <p>
          William Liu<br/>
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/williamqliu/">github.com/williamqliu</a><br/>
        </p>
      </div>
    </div>
  </div>

  <!--
  <a href="http://github.com/williamqliu"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
  -->

  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-36019998-1', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- Google Analytics end -->
</body>

</html>